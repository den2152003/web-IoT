extends ../../../layout/default.pug
include ../../../mixin/alert.pug

block main
    //- Ph·∫ßn n·ªÅn Gradient nh·∫π t·∫°o chi·ªÅu s√¢u cho trang
    .container-fluid.py-3(style="background: linear-gradient(180deg, #f8f9fa 0%, #e9ecef 100%); min-height: 100vh;")
        .container
            +alert-success(5000)
            +alert-error(5000)
            
            //- Header thi·∫øt k·∫ø t·ªëi gi·∫£n, hi·ªán ƒë·∫°i
            .row.justify-content-center.mb-2
                .col-md-8.text-center
                    .display-4.text-primary.mb-2
                        i.fas.fa-project-diagram.animate__animated.animate__fadeInDown
                    h3.font-weight-bold.text-dark Thi·∫øt L·∫≠p Node M·ªõi
                    p.lead.text-muted C·∫•u h√¨nh v√† k·∫øt n·ªëi thi·∫øt b·ªã c·∫£m bi·∫øn v√†o h·ªá th·ªëng ƒëi·ªÅu khi·ªÉn trung t√¢m

            .row.justify-content-center
                .col-xl-10
                    .card.border-0.shadow-lg.overflow-hidden(style="border-radius: 20px;")
                        .row.no-gutters
                            //- C·ªôt tr√°i: H∆∞·ªõng d·∫´n & T√¨m ki·∫øm (Dark Sidebar style)
                            .col-lg-4.bg-dark.p-4.text-white
                                h5.mb-4.text-info 
                                    i.fas.fa-search-location.mr-2
                                    | B∆∞·ªõc 1: Qu√©t thi·∫øt b·ªã
                                p.small.text-secondary T√¨m ki·∫øm ƒë·ªãa ch·ªâ WiFi c·ªßa Node ƒë·ªÉ x√°c ƒë·ªãnh m√£ ƒë·ªãnh danh duy nh·∫•t (ID).

                                form(id="form-search-wifiName" class="mt-4")
                                    .form-group
                                        label.text-light.small T√™n WiFi (SSID)
                                        .input-group.shadow-sm
                                            input.form-control.border-0(
                                                type="text" 
                                                id="wifiName" 
                                                name="wifiName"
                                                placeholder="VD: SmartNode_..."
                                                value=wifiName
                                                style="border-radius: 10px 0 0 10px;"
                                            ) 
                                            .input-group-append
                                                button.btn.btn-info(type="submit" style="border-radius: 0 10px 10px 0;")
                                                    i.fas.fa-sync-alt

                                .form-group.mt-4
                                    label.text-light.small K·∫øt qu·∫£ t√¨m th·∫•y
                                    select(name="nodeId" id="selectNode" class="custom-select border-0 shadow-sm" style="border-radius: 10px; height: 45px;")
                                        option(value="" disabled selected) --- Ch·ªçn thi·∫øt b·ªã ---
                                        each item in node 
                                            option(value=item.nodeId) ‚ö° #{item.wifiName} - #{item.nodeId}

                                //- Decorate th√™m m·ªôt ch√∫t h√¨nh ·∫£nh minh h·ªça logic
                                .mt-5.d-none.d-lg-block.opacity-50
                                    .p-3.border.border-secondary.rounded(style="border-style: dashed !important;")
                                        small.d-block.mb-2 üí° L∆∞u √Ω:
                                        small ƒê·∫£m b·∫£o Node ƒëang ·ªü ch·∫ø ƒë·ªô Ph√°t WiFi (AP Mode) tr∆∞·ªõc khi th·ª±c hi·ªán qu√©t.

                            //- C·ªôt ph·∫£i: Form nh·∫≠p li·ªáu (Clean White style)
                            .col-lg-8.bg-white.p-4.p-md-5
                                h5.mb-4.text-dark 
                                    i.fas.fa-edit.mr-2.text-primary
                                    | B∆∞·ªõc 2: Th√¥ng tin v·∫≠n h√†nh

                                form(
                                    action=`/node/create`
                                    id="form-create-node"
                                    method="POST"
                                )
                                    input(type="hidden" name="gatewayId" value=gatewayId)
                                    input(type="hidden" name="nodeId" id="hiddenNodeId" value="")

                                    .form-group.mb-4
                                        label.font-weight-bold T√™n ƒë·ªãnh danh
                                        input.form-control.form-control-md.bg-light.border-0(
                                            type="text"
                                            name="nodeName"
                                            placeholder="ƒê·∫∑t t√™n d·ªÖ nh·ªõ "
                                            required
                                            style="border-radius: 12px;"
                                        )
                                    
                                    .form-group.mb-4
                                        label.font-weight-bold V·ªã tr√≠ & ƒê·ªãa ch·ªâ l·∫Øp ƒë·∫∑t
                                        .input-group
                                            input.form-control.form-control-md.bg-light.border-0(
                                                type="text" 
                                                id="address"
                                                name="address" 
                                                placeholder="Nh·∫≠p t·ªça ƒë·ªô"
                                                required
                                                style="border-radius: 12px 0 0 12px;"
                                            )
                                            .input-group-append
                                                a.btn.btn-light.border-0.d-flex.align-items-center(
                                                    href="http://maps.google.com" 
                                                    target="_blank" 
                                                    style="border-radius: 0 12px 12px 0; background-color: #f1f3f5;"
                                                )
                                                    i.fas.fa-map-marked-alt.text-danger

                                    .form-group.mb-4
                                        label.font-weight-bold Ghi ch√∫ chi ti·∫øt
                                        textarea.form-control.bg-light.border-0(
                                            name="description"
                                            rows="4"
                                            placeholder="M√¥ t·∫£ m·ª•c ƒë√≠ch s·ª≠ d·ª•ng thi·∫øt b·ªã n√†y..."
                                            style="border-radius: 12px;"
                                        )

                                    .mt-5.d-flex.justify-content-between.align-items-center
                                        a.btn.btn-link.text-muted(href=`/project/manage/${gatewayId}`)
                                            i.fas.fa-chevron-left.mr-2
                                            | H·ªßy b·ªè
                                        
                                        button.btn.btn-primary.btn-lg.px-5(
                                            type="submit"
                                            style="border-radius: 15px; box-shadow: 0 10px 20px rgba(0,123,255,0.2);"
                                        )
                                            i.fas.fa-save.mr-2
                                            | L∆∞u v√† K√≠ch ho·∫°t Node